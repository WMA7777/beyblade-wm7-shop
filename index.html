<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Boutique Beyblade Interactive</title>
  <!-- Bootstrap CSS et Font Awesome -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  <!-- A-Frame pour la réalité augmentée -->
  <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
  <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
  <!-- Three.js pour le configurateur -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <!-- Phaser.js pour le simulateur de combat -->
  <script src="https://cdn.jsdelivr.net/npm/phaser@3.55.2/dist/phaser.min.js"></script>
  <style>
    /* Styles généraux */
    body {
      scroll-behavior: smooth;
    }
    section {
      padding: 60px 0;
    }
    h2 {
      margin-bottom: 40px;
    }
    /* Carousel / Hero */
    .hero {
      height: 500px;
    }
    .carousel-item img {
      object-fit: cover;
      height: 500px;
      width: 100%;
    }
    /* Produits */
    .product {
      margin-bottom: 30px;
    }
    .card img {
      height: 200px;
      object-fit: cover;
    }
    /* Configurateur Three.js */
    #configurator {
      background: #f4f4f4;
      text-align: center;
    }
    #configCanvas {
      width: 100%;
      height: 400px;
      background: #000;
    }
    /* Combat virtuel – zone du jeu Phaser */
    #combatGame {
      width: 100%;
      height: 400px;
      background: #222;
    }
    /* Avis interactifs */
    .review {
      border-bottom: 1px solid #ddd;
      padding: 15px 0;
    }
    /* Fidélité */
    .loyalty {
      background: #e9ecef;
      padding: 30px;
      text-align: center;
      border-radius: 5px;
    }
    /* Bouton chat en direct (fixe en bas à droite) */
    #chat-button {
      position: fixed;
      bottom: 20px;
      right: 20px;
      z-index: 1050;
      background: #28a745;
      color: #fff;
      border: none;
      border-radius: 50%;
      width: 60px;
      height: 60px;
      font-size: 1.5rem;
      box-shadow: 0 4px 8px rgba(0,0,0,0.3);
    }
  </style>
</head>
<body>

  <!-- Navigation principale -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
    <div class="container">
      <a class="navbar-brand" href="#">Boutique Beyblade</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" 
              data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" 
              aria-label="Basculer la navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <!-- Liens principaux -->
        <ul class="navbar-nav mr-auto">
          <li class="nav-item"><a class="nav-link" href="#accueil">Accueil</a></li>
          <li class="nav-item"><a class="nav-link" href="#produits">Produits</a></li>
          <li class="nav-item"><a class="nav-link" href="#configurateur">Configurateur</a></li>
          <li class="nav-item"><a class="nav-link" href="#combat">Combat</a></li>
          <li class="nav-item"><a class="nav-link" href="#avis">Avis</a></li>
          <li class="nav-item"><a class="nav-link" href="#fidelite">Fidélité</a></li>
          <li class="nav-item"><a class="nav-link" href="#tutoriels">Tutoriels</a></li>
          <li class="nav-item"><a class="nav-link" href="#ar">Réalité Augmentée</a></li>
          <li class="nav-item"><a class="nav-link" href="#evenements">Événements</a></li>
          <li class="nav-item"><a class="nav-link" href="#recommandations">Recommandations</a></li>
          <li class="nav-item"><a class="nav-link" href="#faq">FAQ</a></li>
          <li class="nav-item"><a class="nav-link" href="#contact">Contact</a></li>
        </ul>
        <!-- Barre de recherche -->
        <form class="form-inline my-2 my-lg-0">
          <input id="search-input" class="form-control mr-sm-2" type="search" placeholder="Rechercher" aria-label="Rechercher">
        </form>
        <!-- Bouton Panier (exemple d'icône) -->
        <button class="btn btn-outline-light my-2 my-sm-0" type="button" data-toggle="modal" data-target="#cartModal">
          <i class="fas fa-shopping-cart"></i> <span id="cart-count" class="badge badge-light">0</span>
        </button>
      </div>
    </div>
  </nav>

  <!-- Section Accueil avec Carousel -->
  <header id="accueil" class="mt-5 pt-4">
    <div id="heroCarousel" class="carousel slide hero" data-ride="carousel">
      <ol class="carousel-indicators">
        <li data-target="#heroCarousel" data-slide-to="0" class="active"></li>
        <li data-target="#heroCarousel" data-slide-to="1"></li>
        <li data-target="#heroCarousel" data-slide-to="2"></li>
      </ol>
      <div class="carousel-inner">
        <div class="carousel-item active">
          <img src="https://via.placeholder.com/1200x500?text=Beyblade+Action+1" class="d-block w-100" alt="Beyblade 1">
          <div class="carousel-caption d-none d-md-block">
            <h1>Beyblade en Action</h1>
            <p>Des batailles épiques à vivre !</p>
          </div>
        </div>
        <div class="carousel-item">
          <img src="https://via.placeholder.com/1200x500?text=Beyblade+Action+2" class="d-block w-100" alt="Beyblade 2">
          <div class="carousel-caption d-none d-md-block">
            <h1>Force et Précision</h1>
            <p>Choisissez votre champion.</p>
          </div>
        </div>
        <div class="carousel-item">
          <img src="https://via.placeholder.com/1200x500?text=Beyblade+Action+3" class="d-block w-100" alt="Beyblade 3">
          <div class="carousel-caption d-none d-md-block">
            <h1>Personnalisation Totale</h1>
            <p>Créez votre toupie unique.</p>
          </div>
        </div>
      </div>
      <a class="carousel-control-prev" href="#heroCarousel" role="button" data-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      </a>
      <a class="carousel-control-next" href="#heroCarousel" role="button" data-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
      </a>
    </div>
  </header>

  <!-- Section Produits -->
  <section id="produits">
    <div class="container">
      <h2 class="text-center">Nos Produits</h2>
      <div class="row" id="product-container">
        <!-- Produit 1 -->
        <div class="col-md-4 product" data-title="Beyblade Burst">
          <div class="card">
            <img src="https://via.placeholder.com/350x200?text=Beyblade+Burst" class="card-img-top" alt="Toupie Beyblade Burst">
            <div class="card-body">
              <h5 class="card-title">Toupie Beyblade Burst</h5>
              <p class="card-text">La toupie idéale pour des combats rapides.</p>
              <p><strong>Prix: 29,99 €</strong></p>
              <button class="btn btn-success add-to-cart" 
                      data-id="1" 
                      data-title="Toupie Beyblade Burst" 
                      data-price="29.99">Acheter</button>
            </div>
          </div>
        </div>
        <!-- Produit 2 -->
        <div class="col-md-4 product" data-title="Beyblade Metal Fusion">
          <div class="card">
            <img src="https://via.placeholder.com/350x200?text=Beyblade+Metal+Fusion" class="card-img-top" alt="Toupie Beyblade Metal Fusion">
            <div class="card-body">
              <h5 class="card-title">Toupie Beyblade Metal Fusion</h5>
              <p class="card-text">Combattez avec puissance et robustesse.</p>
              <p><strong>Prix: 39,99 €</strong></p>
              <button class="btn btn-success add-to-cart" 
                      data-id="2" 
                      data-title="Toupie Beyblade Metal Fusion" 
                      data-price="39.99">Acheter</button>
            </div>
          </div>
        </div>
        <!-- Produit 3 -->
        <div class="col-md-4 product" data-title="Beyblade Metal Masters">
          <div class="card">
            <img src="https://via.placeholder.com/350x200?text=Beyblade+Metal+Masters" class="card-img-top" alt="Toupie Beyblade Metal Masters">
            <div class="card-body">
              <h5 class="card-title">Toupie Beyblade Metal Masters</h5>
              <p class="card-text">La référence pour les champions.</p>
              <p><strong>Prix: 49,99 €</strong></p>
              <button class="btn btn-success add-to-cart" 
                      data-id="3" 
                      data-title="Toupie Beyblade Metal Masters" 
                      data-price="49.99">Acheter</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Section Configurateur interactif de toupies -->
  <section id="configurateur">
    <div class="container">
      <h2 class="text-center">Configurateur interactif</h2>
      <p class="text-center">Personnalisez votre toupie en choisissant la couleur :</p>
      <div class="text-center mb-4">
        <input type="color" id="colorPicker" value="#00ff00" onchange="changeCubeColor(this.value)">
      </div>
      <div id="configCanvas-container" class="mx-auto" style="max-width: 600px; border: 2px solid #333;">
        <canvas id="configCanvas"></canvas>
      </div>
      <p class="text-center mt-3">(Exemple avec un cube en rotation – à remplacer par votre modèle 3D de toupie)</p>
    </div>
  </section>

  <!-- Section Combat virtuel -->
  <section id="combat" class="bg-dark text-white">
    <div class="container">
      <h2 class="text-center">Simulateur de combat virtuel</h2>
      <p class="text-center">Cliquez sur "Lancer Combat" pour lancer une démonstration de duel entre toupies.</p>
      <div class="text-center mb-4">
        <button class="btn btn-primary" onclick="startCombat()">Lancer Combat</button>
      </div>
      <div id="combatGame" class="mx-auto" style="max-width: 800px;"></div>
      <p class="text-center mt-3">(Simulation minimale avec deux sprites en mouvement)</p>
    </div>
  </section>

  <!-- Section Avis interactifs -->
  <section id="avis" class="bg-light">
    <div class="container">
      <h2 class="text-center">Avis et Notations</h2>
      <div class="row">
        <div class="col-md-6 offset-md-3">
          <!-- Formulaire d'avis -->
          <form id="review-form">
            <div class="form-group">
              <label for="review-name">Votre nom</label>
              <input type="text" class="form-control" id="review-name" required>
            </div>
            <div class="form-group">
              <label for="review-text">Votre avis</label>
              <textarea id="review-text" class="form-control" rows="3" required></textarea>
            </div>
            <button type="submit" class="btn btn-success btn-block">Envoyer l'avis</button>
          </form>
          <hr>
          <!-- Liste d'avis -->
          <div id="reviews">
            <!-- Les avis s'afficheront ici -->
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Section Programme de fidélité -->
  <section id="fidelite">
    <div class="container">
      <h2 class="text-center">Programme de Fidélité</h2>
      <div class="loyalty">
        <p>Vous avez accumulé <strong id="loyaltyPoints">0</strong> points de fidélité.</p>
        <p>Chaque achat vous rapporte des points échangeables contre des réductions ou des produits exclusifs.</p>
      </div>
    </div>
  </section>

  <!-- Section Tutoriels interactifs -->
  <section id="tutoriels" class="bg-light">
    <div class="container">
      <h2 class="text-center">Tutoriels et Démonstrations</h2>
      <div class="row">
        <!-- Exemple d'un tutoriel vidéo intégré -->
        <div class="col-md-6">
          <div class="embed-responsive embed-responsive-16by9">
            <iframe class="embed-responsive-item" src="https://www.youtube.com/embed/ScMzIvxBSi4" allowfullscreen></iframe>
          </div>
          <p class="text-center mt-2">Comment personnaliser votre toupie</p>
        </div>
        <div class="col-md-6">
          <div class="embed-responsive embed-responsive-16by9">
            <iframe class="embed-responsive-item" src="https://www.youtube.com/embed/dQw4w9WgXcQ" allowfullscreen></iframe>
          </div>
          <p class="text-center mt-2">Astuces pour des combats gagnants</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Section Réalité Augmentée -->
  <section id="ar">
    <div class="container">
      <h2 class="text-center">Visualisation en Réalité Augmentée</h2>
      <p class="text-center">Scannez le marker ou utilisez votre caméra pour voir la toupie en 3D dans votre environnement.</p>
      <div style="height: 300px; margin: auto; max-width: 600px;">
        <!-- Exemple de scène A-Frame avec AR.js -->
        <a-scene embedded arjs="sourceType: webcam;">
          <a-marker preset="hiro">
            <a-box position="0 0.5 0" material="color: red;"></a-box>
          </a-marker>
          <a-entity camera></a-entity>
        </a-scene>
      </div>
      <p class="text-center mt-2">(Utilisez un marker Hiro pour tester)</p>
    </div>
  </section>

  <!-- Section Calendrier d’événements -->
  <section id="evenements" class="bg-dark text-white">
    <div class="container">
      <h2 class="text-center">Calendrier d’Événements</h2>
      <p class="text-center">Découvrez les prochains tournois et événements de la communauté.</p>
      <table class="table table-dark table-bordered mt-4">
        <thead>
          <tr>
            <th>Date</th>
            <th>Événement</th>
            <th>Lieu</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>15/05/2025</td>
            <td>Tournoi Régional</td>
            <td>Valence</td>
          </tr>
          <tr>
            <td>28/06/2025</td>
            <td>Championnat National</td>
            <td>Paris</td>
          </tr>
          <tr>
            <td>10/08/2025</td>
            <td>Battle en Ligne</td>
            <td>Virtuel</td>
          </tr>
        </tbody>
      </table>
    </div>
  </section>

  <!-- Section Recommandations personnalisées -->
  <section id="recommandations">
    <div class="container">
      <h2 class="text-center">Nos Recommandations</h2>
      <div class="row">
        <!-- Exemple de produit recommandé -->
        <div class="col-md-4 product" data-title="Beyblade Limited Edition">
          <div class="card">
            <img src="https://via.placeholder.com/350x200?text=Limited+Edition" class="card-img-top" alt="Beyblade Limited Edition">
            <div class="card-body">
              <h5 class="card-title">Beyblade Limited Edition</h5>
              <p class="card-text">Une édition exclusive pour les collectionneurs.</p>
              <p><strong>Prix: 59,99 €</strong></p>
              <button class="btn btn-success add-to-cart" 
                      data-id="4" 
                      data-title="Beyblade Limited Edition" 
                      data-price="59.99">Acheter</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Section FAQ -->
  <section id="faq" class="bg-light">
    <div class="container">
      <h2 class="text-center">FAQ</h2>
      <div id="accordion">
        <div class="card">
          <div class="card-header" id="headingOne">
            <h5 class="mb-0">
              <button class="btn btn-link" data-toggle="collapse" 
                      data-target="#collapseOne" aria-expanded="true" 
                      aria-controls="collapseOne">
                Comment fonctionnent les combats de Beyblade ?
              </button>
            </h5>
          </div>
          <div id="collapseOne" class="collapse show" 
               aria-labelledby="headingOne" data-parent="#accordion">
            <div class="card-body">
              Les combats se déroulent dans une arène spécialement conçue où la stratégie et la configuration de vos toupies font toute la différence.
            </div>
          </div>
        </div>
        <div class="card">
          <div class="card-header" id="headingTwo">
            <h5 class="mb-0">
              <button class="btn btn-link collapsed" data-toggle="collapse" 
                      data-target="#collapseTwo" aria-expanded="false" 
                      aria-controls="collapseTwo">
                Puis-je personnaliser complètement ma toupie ?
              </button>
            </h5>
          </div>
          <div id="collapseTwo" class="collapse" 
               aria-labelledby="headingTwo" data-parent="#accordion">
            <div class="card-body">
              Oui, notre configurateur interactif vous permet d'ajuster divers paramètres et couleurs pour créer une toupie unique.
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Section Contact -->
  <section id="contact">
    <div class="container">
      <h2 class="text-center">Contactez-nous</h2>
      <div class="row justify-content-center">
        <div class="col-md-6">
          <form>
            <div class="form-group">
              <label for="contact-name">Nom</label>
              <input type="text" class="form-control" id="contact-name" placeholder="Votre nom" required>
            </div>
            <div class="form-group">
              <label for="contact-email">Email</label>
              <input type="email" class="form-control" id="contact-email" placeholder="Votre email" required>
            </div>
            <div class="form-group">
              <label for="contact-message">Message</label>
              <textarea class="form-control" id="contact-message" rows="5" placeholder="Votre message" required></textarea>
            </div>
            <button type="submit" class="btn btn-primary btn-block">Envoyer</button>
          </form>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer avec Newsletter -->
  <footer class="bg-dark text-white">
    <div class="container text-center py-4">
      <p>&copy; 2025 Boutique Beyblade Interactive. Tous droits réservés.</p>
      <p>
        <a href="mailto:contact@boutiquebeyblade.fr" style="color: #fff; text-decoration: underline;">
          contact@boutiquebeyblade.fr
        </a>
      </p>
      <div class="mt-3">
        <h5>Abonnez-vous à notre newsletter</h5>
        <form class="form-inline justify-content-center">
          <div class="form-group mb-2">
            <label for="newsletter-email" class="sr-only">Email</label>
            <input type="email" class="form-control" id="newsletter-email" placeholder="Votre email">
          </div>
          <button type="submit" class="btn btn-primary mb-2 ml-2">S'abonner</button>
        </form>
      </div>
    </div>
  </footer>

  <!-- Bouton Chat en Direct (fixe en bas à droite) -->
  <button id="chat-button" onclick="$('#chatModal').modal('show')">
    <i class="fas fa-comments"></i>
  </button>

  <!-- Modal Chat en Direct -->
  <div class="modal fade" id="chatModal" tabindex="-1" aria-labelledby="chatModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="chatModalLabel">Chat en Direct</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Fermer">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body" style="max-height:400px; overflow-y:auto;" id="chat-box">
          <div class="text-center text-muted">Démarrez la conversation...</div>
        </div>
        <div class="modal-footer">
          <input type="text" id="chat-input" class="form-control" placeholder="Votre message">
          <button class="btn btn-success" onclick="sendMessage()">Envoyer</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal Panier -->
  <div class="modal fade" id="cartModal" tabindex="-1" aria-labelledby="cartModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="cartModalLabel">Votre Panier</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Fermer">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <table class="table table-bordered">
            <thead>
              <tr>
                <th>Produit</th>
                <th>Prix (€)</th>
                <th>Quantité</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody id="cart-items">
              <tr>
                <td colspan="4" class="text-center">Votre panier est vide</td>
              </tr>
            </tbody>
          </table>
          <div class="text-right">
            <h5>Total: <span id="cart-total">0.00</span> €</h5>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Continuer vos achats</button>
          <button type="button" class="btn btn-primary" id="checkout-btn">Commander</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Inclusions JS : jQuery et Bootstrap JS -->
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Script JavaScript personnalisé -->
  <script>
    /* -------------------------------
       Fonctions de gestion du panier
    ------------------------------- */
    var cart = [];
    function addToCart(product) {
      var found = cart.find(item => item.id === product.id);
      if(found) {
        found.quantity++;
      } else {
        product.quantity = 1;
        cart.push(product);
      }
      updateCartDisplay();
      // Mise à jour du programme de fidélité : ajoute 10 points par achat
      updateLoyaltyPoints(10);
      // Notification en temps réel lors de l'ajout d'un produit
      showNotification("Produit ajouté", "Votre toupie a été ajoutée au panier!");
      $('#successModal').modal('show');
    }
    function updateCartDisplay() {
      var cartItemsContainer = document.getElementById('cart-items');
      var total = 0;
      cartItemsContainer.innerHTML = '';
      if (cart.length === 0) {
        cartItemsContainer.innerHTML = '<tr><td colspan="4" class="text-center">Votre panier est vide</td></tr>';
      } else {
        cart.forEach((item, index) => {
          total += parseFloat(item.price) * item.quantity;
          cartItemsContainer.innerHTML += 
            `<tr>
               <td>${item.title}</td>
               <td>${parseFloat(item.price).toFixed(2)}</td>
               <td>${item.quantity}</td>
               <td><button class="btn btn-danger btn-sm" onclick="removeFromCart(${index})">Supprimer</button></td>
             </tr>`;
        });
      }
      document.getElementById('cart-total').textContent = total.toFixed(2);
      document.getElementById('cart-count').textContent = cart.reduce((acc, item) => acc + item.quantity, 0);
    }
    function removeFromCart(index) {
      cart.splice(index, 1);
      updateCartDisplay();
    }
    document.querySelectorAll('.add-to-cart').forEach(button => {
      button.addEventListener('click', function() {
        var product = {
          id: this.getAttribute('data-id'),
          title: this.getAttribute('data-title'),
          price: this.getAttribute('data-price')
        };
        addToCart(product);
      });
    });
    document.getElementById('checkout-btn').addEventListener('click', function() {
      alert('Fonction de commande en cours de développement!');
    });

    /* -------------------------------
       Configurateur interactif avec Three.js
    ------------------------------- */
    let scene, camera, renderer, cube;
    function initThree() {
      const canvas = document.getElementById('configCanvas');
      renderer = new THREE.WebGLRenderer({ canvas: canvas, antialias: true });
      renderer.setSize(canvas.clientWidth, canvas.clientHeight);
      scene = new THREE.Scene();
      camera = new THREE.PerspectiveCamera(75, canvas.clientWidth / canvas.clientHeight, 0.1, 1000);
      camera.position.z = 2;
      const geometry = new THREE.BoxGeometry();
      const material = new THREE.MeshBasicMaterial({ color: 0x00ff00 });
      cube = new THREE.Mesh(geometry, material);
      scene.add(cube);
      animateThree();
    }
    function animateThree() {
      requestAnimationFrame(animateThree);
      cube.rotation.x += 0.01;
      cube.rotation.y += 0.01;
      renderer.render(scene, camera);
    }
    function changeCubeColor(color) {
      if(cube) {
        cube.material.color.set(color);
      }
    }
    window.addEventListener('load', initThree);

    /* -------------------------------
       Simulateur de combat virtuel avec Phaser
    ------------------------------- */
    var phaserGame;
    const phaserConfig = {
      type: Phaser.AUTO,
      width: 800,
      height: 400,
      parent: 'combatGame',
      physics: {
        default: 'arcade'
      },
      scene: {
        preload: phaserPreload,
        create: phaserCreate,
        update: phaserUpdate
      }
    };
    function phaserPreload() {
      this.load.image('bey1', 'https://via.placeholder.com/100x100?text=Bey1');
      this.load.image('bey2', 'https://via.placeholder.com/100x100?text=Bey2');
    }
    function phaserCreate() {
      this.physics.world.setBounds(0, 0, 800, 400);
      this.bey1 = this.physics.add.sprite(100, 200, 'bey1');
      this.bey2 = this.physics.add.sprite(700, 200, 'bey2');
      this.tweens.add({
        targets: this.bey1,
        x: 400,
        duration: 2000,
        yoyo: true,
        repeat: -1,
        ease: 'Sine.easeInOut'
      });
      this.tweens.add({
        targets: this.bey2,
        x: 400,
        duration: 2000,
        yoyo: true,
        repeat: -1,
        ease: 'Sine.easeInOut'
      });
    }
    function phaserUpdate() {
      // Logique supplémentaire si nécessaire.
    }
    function startCombat() {
      if(!phaserGame) {
        phaserGame = new Phaser.Game(phaserConfig);
      }
    }

    /* -------------------------------
       Chat en direct
    ------------------------------- */
    function sendMessage() {
      var input = document.getElementById('chat-input');
      var message = input.value;
      if(message.trim() !== "") {
        var chatBox = document.getElementById('chat-box');
        var newMessage = document.createElement('div');
        newMessage.textContent = message;
        newMessage.className = "chat-message text-right mb-2";
        chatBox.appendChild(newMessage);
        input.value = "";
        chatBox.scrollTop = chatBox.scrollHeight;
      }
    }

    /* -------------------------------
       Gestion des avis clients
    ------------------------------- */
    document.getElementById('review-form').addEventListener('submit', function(e) {
      e.preventDefault();
      var name = document.getElementById('review-name').value;
      var text = document.getElementById('review-text').value;
      var reviewDiv = document.createElement('div');
      reviewDiv.className = "review";
      reviewDiv.innerHTML = "<strong>" + name + ":</strong> " + text;
      document.getElementById('reviews').appendChild(reviewDiv);
      this.reset();
    });

    /* -------------------------------
       Programme de fidélité
    ------------------------------- */
    var loyaltyPoints = 0;
    function updateLoyaltyPoints(points) {
      loyaltyPoints += points;
      document.getElementById('loyaltyPoints').textContent = loyaltyPoints;
    }

    /* -------------------------------
       Notifications en temps réel via Notification API
    ------------------------------- */
    function showNotification(title, message) {
      if ("Notification" in window) {
        if(Notification.permission === "granted") {
          new Notification(title, { body: message });
        } else if (Notification.permission !== "denied") {
          Notification.requestPermission().then(function(permission) {
            if(permission === "granted") {
              new Notification(title, { body: message });
            }
          });
        }
      } else {
        console.log("Les notifications ne sont pas supportées par votre navigateur.");
      }
    }
    // Exemple : déclenche une notification après 5 secondes
    setTimeout(function(){
      showNotification("Nouveauté", "Découvrez notre nouvelle collection exclusive de toupies Beyblade!");
    }, 5000);

  </script>
</body>
</html>
